<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>Mutation Class Report - ${coverage.fqName}</title>
		<link title="Style" type="text/css" rel="stylesheet" href="css/main.css"/>
		<link title="Style" type="text/css" rel="stylesheet" href="css/sources.css"/>
	</head>
	<body>
		<script type="text/javascript" src="js/tooltip/wz_tooltip.js"></script>
		<h2>Mutation Class Report - ${coverage.fqName}</h2>
		<div class="separator">&nbsp;</div>

		<#assign percKilled = 100 * coverage.coverage >		
		<#assign percSurv = 100 - percKilled >		


		<table class="report">
			<thead>
				<tr>
				  <td  class="titleCell">Classes in this File</td>  
				  <td  class="titleCell" width="20%">Mutation Coverage</td>
				</tr>
			</thead>

			<tr>
				<td><a href="">${coverage.fqName}</a></td>
				<td>
			<table class="bar" cellpadding="0" cellspacing="0" align="right">
				<tr>
					<div class="carmanotcovered" cellpadding="0" cellspacing="0">
						<div class="carmacovered" style="width: ${percKilled}px">
						<span >${percKilled}%</span>
						</div>
					</div>
				</tr>
			</table>
				</td>
			</tr>
		</table>
		
		<p>
		

		<table id="classStatistics">
			<tr>
				<td>Mutants:</td><td>${coverage.numMutants}</td>
				<td>Survivors:</td><td>${coverage.numSurvivors}</td>
				<td>Coverage:</td><td>${percKilled}%</td>
			</tr>
		</table>
		
		<table id="testList">
			<th class="titleCell">Test Names</th>
			<#list clazz.executedTests as test >
			<tr>
				<td class="text">${test}</td>
			</tr>
			</#list>
		</table>

		<table id="mutationList">
			<th class="titleCell">Mutant</th>
			<th class="titleCell">Line No</th>
			<th class="titleCell">Killed</th>
			<th class="titleCell">Killer Tests</th>
			
			<#list clazz.getMutant() as mutant >
				<#assign killed = (! mutant.isSurvived() ) >
			<tr>
				<td class="text">${mutant.name!"NoName"} ${mutant.transition} ${mutant.transitionGroup}</td>
				<td class="text">${mutant.baseSourceLine}</td>
				<td class="text"><#if killed>Y<#else>N</#if></td>
				<td class="text">
				<#list mutant.killerTests as test>
					${test}<br/>
				</#list>
				</td>
			</tr>
			</#list>
		</table>
	</p>

		<table id="sourceCode" cellspacing="0" cellpadding="0" class="src">
			
		<#assign mutId = 0 >
		<#list sourceInfo as sourceLine>
			
			<#assign line =  sourceLine.text?replace(" ","&#160;") >
			<#assign line = line?replace("\t","&#160;&#160;") >
			<#if sourceLine.mutantInfo??  >
		
			
				<#list sourceLine.mutantInfo as mutant >
					<#assign mutId = mutId+1 >
					<#if mutant.isSurvived() >
					<tr>
			  			<td class="numLineSurvived">${sourceLine.lineNo}</td>

			  			<td class="src"><pre class="src"><span class="srcUncovered"><a <a onmouseover="TagToTip('Tooltip${mutId}', BGCOLOR, '#ffdddd')">&nbsp;${line}</a></span></pre></td>
						<span id="Tooltip${mutId}">
							<b>Name:</b> ${mutant.name!"NoName"}:<br/>
						 	<b>Transition:</b> ${mutant.transition}<br/>
						 	<b>Description:</b> ${transitionsDescription.getString(mutant.transition)}<br/>
						 </span>
					</tr>
					<#else>
					<tr>
			  			<td class="numLineCover">&nbsp;${sourceLine.lineNo}</td>
			  			<td class="src"><pre class="src"><span class="srcCovered"><a onmouseover="TagToTip('Tooltip${mutId}', BGCOLOR, '#ddffdd')" >&nbsp;${line}</a></span></pre></td>

						<span id="Tooltip${mutId}">
							<b>Name:</b> ${mutant.name!"NoName"}:<br/>
						 	<b>Transition:</b> ${mutant.transition}<br/>
						 	<b>Description:</b> ${transitionsDescription.getString(mutant.transition)}<br/>
						 	<b>KillerTests:</b> <#list mutant.killerTests as test>${test}&nbsp;</#list>
						 </span>

					</tr>
						
					</#if>
				</#list>
			<#else>
			<tr>
			  <td class="numLine">&nbsp;${sourceLine.lineNo}</td>
			  <td class="src"><pre class="src">&nbsp;${line}</pre></td>
			</tr>
			</#if>
		</#list>

		</table>
		<div class="footer">
			Reports generated by <a href="http://carma.retroduction.com/" target="_top">Carma</a>.
		</div>
	</body>
</html>
